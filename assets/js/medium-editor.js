"classList"in document.createElement("_")||function(f){if("Element"in f){f=f.Element.prototype;var u=Object,a=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array.prototype.indexOf||function(g){for(var p=0,q=this.length;p<q;p++)if(p in this&&this[p]===g)return p;return-1},k=function(g,p){this.name=g;this.code=DOMException[g];this.message=p},l=function(g,p){if(""===p)throw new k("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(p))throw new k("INVALID_CHARACTER_ERR","String contains an invalid character");return c.call(g,p)},d=function(g){var p=a.call(g.getAttribute("class")||"");p=p?p.split(/\s+/):[];for(var q=0,r=p.length;q<r;q++)this.push(p[q]);this._updateClassName=function(){g.setAttribute("class",this.toString())}},b=d.prototype=[],e=function(){return new d(this)};k.prototype=Error.prototype;b.item=function(g){return this[g]||null};b.contains=function(g){return-1!==l(this,g+"")};b.add=function(){var g=arguments,p=0,q=g.length,r=!1;do{var v=g[p]+"";-1===l(this,v)&&(this.push(v),r=!0)}while(++p<q);r&&this._updateClassName()};b.remove=function(){var g=arguments,p=0,q=g.length,r=!1,v;do{var x=g[p]+"";for(v=l(this,x);-1!==v;)this.splice(v,1),r=!0,v=l(this,x)}while(++p<q);r&&this._updateClassName()};b.toggle=function(g,p){g+="";var q=this.contains(g),r=q?!0!==p&&"remove":!1!==p&&"add";if(r)this[r](g);return!0===p||!1===p?p:!q};b.toString=function(){return this.join(" ")};if(u.defineProperty){b={get:e,enumerable:!0,configurable:!0};try{u.defineProperty(f,"classList",b)}catch(g){-2146823252===g.number&&(b.enumerable=!1,u.defineProperty(f,"classList",b))}}else u.prototype.__defineGetter__&&f.__defineGetter__("classList",e)}}(self);(function(f){f.URL=f.URL||f.webkitURL;if(f.Blob&&f.URL)try{new Blob;return}catch(a){}var u=f.BlobBuilder||f.WebKitBlobBuilder||f.MozBlobBuilder||function(a){var c=function(n){return Object.prototype.toString.call(n).match(/^\[object\s(.*)\]$/)[1]},k=function(){this.data=[]},l=function(n,t,w){this.data=n;this.size=n.length;this.type=t;this.encoding=w},d=k.prototype,b=l.prototype,e=a.FileReaderSync,g=function(n){this.code=this[this.name=n]},p="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),q=p.length,r=a.URL||a.webkitURL||a,v=r.createObjectURL,x=r.revokeObjectURL,A=r,y=a.btoa,B=a.atob,F=a.ArrayBuffer,h=a.Uint8Array,m=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(l.fake=b.fake=!0;q--;)g.prototype[p[q]]=q+1;r.createObjectURL||(A=a.URL=function(n){var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");t.href=n;"origin"in t||("data:"===t.protocol.toLowerCase()?t.origin=null:(n=n.match(m),t.origin=n&&n[1]));return t});A.createObjectURL=function(n){var t=n.type;null===t&&(t="application/octet-stream");if(n instanceof l)return t="data:"+t,"base64"===n.encoding?t+";base64,"+n.data:"URI"===n.encoding?t+","+decodeURIComponent(n.data):y?t+";base64,"+y(n.data):t+","+encodeURIComponent(n.data);if(v)return v.call(r,n)};A.revokeObjectURL=function(n){"data:"!==n.substring(0,5)&&x&&x.call(r,n)};d.append=function(n){var t=this.data;if(h&&(n instanceof F||n instanceof h)){var w="";n=new h(n);for(var z=0,C=n.length;z<C;z++)w+=String.fromCharCode(n[z]);t.push(w)}else if("Blob"===c(n)||"File"===c(n))if(e)w=new e,t.push(w.readAsBinaryString(n));else throw new g("NOT_READABLE_ERR");else n instanceof l?"base64"===n.encoding&&B?t.push(B(n.data)):"URI"===n.encoding?t.push(decodeURIComponent(n.data)):"raw"===n.encoding&&t.push(n.data):("string"!==typeof n&&(n+=""),t.push(unescape(encodeURIComponent(n))))};d.getBlob=function(n){arguments.length||(n=null);return new l(this.data.join(""),n,"raw")};d.toString=function(){return"[object BlobBuilder]"};b.slice=function(n,t,w){var z=arguments.length;3>z&&(w=null);return new l(this.data.slice(n,1<z?t:this.data.length),w,this.encoding)};b.toString=function(){return"[object Blob]"};b.close=function(){this.size=0;delete this.data};return k}(f);f.Blob=function(a,c){c=c?c.type||"":"";var k=new u;if(a)for(var l=0,d=a.length;l<d;l++)Uint8Array&&a[l]instanceof Uint8Array?k.append(a[l].buffer):k.append(a[l]);a=k.getBlob(c);!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice);return a};f.Blob.prototype=(Object.getPrototypeOf||function(a){return a.__proto__})(new f.Blob)})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);(function(f,u){"object"===typeof module&&"undefined"!==typeof process&&process&&process.versions&&process.versions.electron||"object"!==typeof module?"function"===typeof define&&define.amd?define(function(){return u}):f.MediumEditor=u:module.exports=u})(this,function(){function f(u,a){return this.init(u,a)}f.extensions={};(function(u){function a(b,e){var g,p=Array.prototype.slice.call(arguments,2);e=e||{};for(var q=0;q<p.length;q++){var r=p[q];if(r)for(g in r)r.hasOwnProperty(g)&&"undefined"!==typeof r[g]&&(b||!1===e.hasOwnProperty(g))&&(e[g]=r[g])}return e}var c=!1;try{var k=document.createElement("div"),l=document.createTextNode(" ");k.appendChild(l);c=k.contains(l)}catch(b){}var d={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:-1<navigator.userAgent.toLowerCase().indexOf("firefox"),isMac:0<=u.navigator.platform.toUpperCase().indexOf("MAC"),keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(b){return d.isMac&&b.metaKey||!d.isMac&&b.ctrlKey?!0:!1},isKey:function(b,e){b=d.getKeyCode(b);return!1===Array.isArray(e)?b===e:-1===e.indexOf(b)?!1:!0},getKeyCode:function(b){var e=b.which;null===e&&(e=null!==b.charCode?b.charCode:b.keyCode);return e},blockContainerElementNames:"p h1 h2 h3 h4 h5 h6 blockquote pre ul li ol address article aside audio canvas dd dl dt fieldset figcaption figure footer form header hgroup main nav noscript output section video table thead tbody tfoot tr th td".split(" "),emptyElementNames:"br col colgroup hr img input source wbr".split(" "),extend:function(){var b=[!0].concat(Array.prototype.slice.call(arguments));return a.apply(this,b)},defaults:function(){var b=[!1].concat(Array.prototype.slice.call(arguments));return a.apply(this,b)},createLink:function(b,e,g,p){b=b.createElement("a");d.moveTextRangeIntoElement(e[0],e[e.length-1],b);b.setAttribute("href",g);p&&("_blank"===p&&b.setAttribute("rel","noopener nofollow"),b.setAttribute("target",p));return b},findOrCreateMatchingTextNodes:function(b,e,g){b=b.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);e=[];for(var p=0,q=!1,r,v=null;null!==(r=b.nextNode());)if(!(3<r.nodeType))if(3===r.nodeType){!q&&g.start<p+r.nodeValue.length&&(q=!0,v=d.splitStartNodeIfNeeded(r,g.start,p));q&&d.splitEndNodeIfNeeded(r,v,g.end,p);if(q&&p===g.end)break;else if(q&&p>g.end+1)throw Error("PerformLinking overshot the target!");q&&e.push(v||r);p+=r.nodeValue.length;null!==v&&(p+=v.nodeValue.length,b.nextNode());v=null}else"img"===r.tagName.toLowerCase()&&(!q&&g.start<=p&&(q=!0),q&&e.push(r));return e},splitStartNodeIfNeeded:function(b,e,g){return e!==g?b.splitText(e-g):null},splitEndNodeIfNeeded:function(b,e,g,p){var q=p+b.nodeValue.length+(e?e.nodeValue.length:0)-1;var r=g-p-(e?b.nodeValue.length:0);q>=g&&p!==q&&0!==r&&(e||b).splitText(r)},splitByBlockElements:function(b){if(3!==b.nodeType&&1!==b.nodeType)return[];var e=[],g=f.util.blockContainerElementNames.join(",");if(3===b.nodeType||0===b.querySelectorAll(g).length)return[b];for(var p=0;p<b.childNodes.length;p++){var q=b.childNodes[p];3===q.nodeType?e.push(q):1===q.nodeType&&(0===q.querySelectorAll(g).length?e.push(q):e=e.concat(f.util.splitByBlockElements(q)))}return e},findAdjacentTextNodeWithContent:function(b,e,g){var p=!1;g=g.createNodeIterator(b,NodeFilter.SHOW_TEXT,null,!1);for(b=g.nextNode();b;){if(b===e)p=!0;else if(p&&3===b.nodeType&&b.nodeValue&&0<b.nodeValue.trim().length)break;b=g.nextNode()}return b},findPreviousSibling:function(b){if(!b||d.isMediumEditorElement(b))return!1;for(var e=b.previousSibling;!e&&!d.isMediumEditorElement(b.parentNode);)b=b.parentNode,e=b.previousSibling;return e},isDescendant:function(b,e,g){if(!b||!e)return!1;if(b===e)return!!g;if(1!==b.nodeType)return!1;if(c||3!==e.nodeType)return b.contains(e);for(e=e.parentNode;null!==e;){if(e===b)return!0;e=e.parentNode}return!1},isElement:function(b){return!(!b||1!==b.nodeType)},throttle:function(b,e){var g,p,q,r=null,v=0,x=function(){v=Date.now();r=null;q=b.apply(g,p);r||(g=p=null)};e||0===e||(e=50);return function(){var A=Date.now(),y=e-(A-v);g=this;p=arguments;0>=y||y>e?(r&&(clearTimeout(r),r=null),v=A,q=b.apply(g,p),r||(g=p=null)):r||(r=setTimeout(x,y));return q}},traverseUp:function(b,e){if(!b)return!1;do{if(1===b.nodeType){if(e(b))return b;if(d.isMediumEditorElement(b))break}b=b.parentNode}while(b);return!1},htmlEntities:function(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(b,e){var g=!1;var p=["insertHTML",!1,e];if(!f.util.isEdge&&b.queryCommandSupported("insertHTML"))try{return b.execCommand.apply(b,p)}catch(v){}var q=b.getSelection();if(q.rangeCount){q=q.getRangeAt(0);g=q.commonAncestorContainer;if(d.isMediumEditorElement(g)&&!g.firstChild)q.selectNode(g.appendChild(b.createTextNode("")));else if(3===g.nodeType&&0===q.startOffset&&q.endOffset===g.nodeValue.length||3!==g.nodeType&&g.innerHTML===q.toString()){for(;!d.isMediumEditorElement(g)&&g.parentNode&&1===g.parentNode.childNodes.length&&!d.isMediumEditorElement(g.parentNode);)g=g.parentNode;q.selectNode(g)}q.deleteContents();g=b.createElement("div");g.innerHTML=e;for(e=b.createDocumentFragment();g.firstChild;){var r=g.firstChild;r=e.appendChild(r)}q.insertNode(e);r&&(q=q.cloneRange(),q.setStartAfter(r),q.collapse(!0),f.selection.selectRange(b,q));g=!0}b.execCommand.callListeners&&b.execCommand.callListeners(p,g);return g},execFormatBlock:function(b,e){var g=d.getTopBlockContainer(f.selection.getSelectionStart(b));if("blockquote"===e){if(g){var p=Array.prototype.slice.call(g.childNodes);if(p.some(function(q){return d.isBlockContainer(q)}))return b.execCommand("outdent",!1,null)}if(d.isIE)return b.execCommand("indent",!1,e)}if(g&&e===g.nodeName.toLowerCase()){if("undefined"!==typeof g.childNodes&&1===g.childNodes.length&&d.isBlockContainer(g.childNodes[0]))return d.unwrap(g,g.ownerDocument),!0;e="p"}d.isIE&&(e="<"+e+">");if(g&&"blockquote"===g.nodeName.toLowerCase()){if(d.isIE&&"<p>"===e)return b.execCommand("outdent",!1,e);if((d.isFF||d.isEdge)&&"p"===e)return p=Array.prototype.slice.call(g.childNodes),p.some(function(q){return!d.isBlockContainer(q)})&&b.execCommand("formatBlock",!1,e),b.execCommand("outdent",!1,e)}return b.execCommand("formatBlock",!1,e)},setTargetBlank:function(b,e){var g=e||!1;if("a"===b.nodeName.toLowerCase())b.target="_blank",b.rel="noopener nofollow";else for(b=b.getElementsByTagName("a"),e=0;e<b.length;e+=1)if(!1===g||g===b[e].attributes.href.value)b[e].target="_blank",b[e].rel="noopener nofollow"},removeTargetBlank:function(b,e){var g;if("a"===b.nodeName.toLowerCase())b.removeAttribute("target"),b.removeAttribute("rel");else for(b=b.getElementsByTagName("a"),g=0;g<b.length;g+=1)e===b[g].attributes.href.value&&(b[g].removeAttribute("target"),b[g].removeAttribute("rel"))},addClassToAnchors:function(b,e){e=e.split(" ");var g;if("a"===b.nodeName.toLowerCase())for(g=0;g<e.length;g+=1)b.classList.add(e[g]);else{var p=b.getElementsByTagName("a");b=0===p.length?(b=d.getClosestTag(b,"a"))?[b]:[]:p;for(p=0;p<b.length;p+=1)for(g=0;g<e.length;g+=1)b[p].classList.add(e[g])}},isListItem:function(b){if(!b)return!1;if("li"===b.nodeName.toLowerCase())return!0;b=b.parentNode;for(var e=b.nodeName.toLowerCase();"li"===e||!d.isBlockContainer(b)&&"div"!==e;){if("li"===e)return!0;if(b=b.parentNode)e=b.nodeName.toLowerCase();else break}return!1},cleanListDOM:function(b,e){if("li"===e.nodeName.toLowerCase()){var g=e.parentElement;"p"===g.parentElement.nodeName.toLowerCase()&&(d.unwrap(g.parentElement,b),f.selection.moveCursor(b,e.firstChild,e.firstChild.textContent.length))}},splitOffDOMTree:function(b,e,g){var p=null;for(g=!g;e!==b;){var q=e.parentNode,r=q.cloneNode(!1),v=g?e:q.firstChild,x;p&&(g?r.appendChild(p):x=p);for(p=r;v;)r=v.nextSibling,v===e?(v.hasChildNodes()?v=v.cloneNode(!1):v.parentNode.removeChild(v),v.textContent&&p.appendChild(v),v=g?r:null):(v.parentNode.removeChild(v),(v.hasChildNodes()||v.textContent)&&p.appendChild(v),v=r);x&&p.appendChild(x);e=q}return p},moveTextRangeIntoElement:function(b,e,g){if(!b||!e)return!1;var p=d.findCommonRoot(b,e);if(!p)return!1;if(e===b)return e=b.parentNode,p=b.nextSibling,e.removeChild(b),g.appendChild(b),p?e.insertBefore(g,p):e.appendChild(g),g.hasChildNodes();for(var q=[],r,v,x,A=0;A<p.childNodes.length;A++)if(x=p.childNodes[A],r)if(d.isDescendant(x,e,!0)){v=x;break}else q.push(x);else d.isDescendant(x,b,!0)&&(r=x);x=v.nextSibling;var y=p.ownerDocument.createDocumentFragment();r===b?(r.parentNode.removeChild(r),y.appendChild(r)):y.appendChild(d.splitOffDOMTree(r,b));q.forEach(function(B){B.parentNode.removeChild(B);y.appendChild(B)});v===e?(v.parentNode.removeChild(v),y.appendChild(v)):y.appendChild(d.splitOffDOMTree(v,e,!0));g.appendChild(y);v.parentNode===p?p.insertBefore(g,v):x?p.insertBefore(g,x):p.appendChild(g);return g.hasChildNodes()},depthOfNode:function(b){for(var e=0;null!==b.parentNode;)b=b.parentNode,e++;return e},findCommonRoot:function(b,e){for(var g=d.depthOfNode(b),p=d.depthOfNode(e);g!==p;)g>p?(b=b.parentNode,--g):(e=e.parentNode,--p);for(;b!==e;)b=b.parentNode,e=e.parentNode;return b},isElementAtBeginningOfBlock:function(b){for(var e,g;!d.isBlockContainer(b)&&!d.isMediumEditorElement(b);){for(g=b;g=g.previousSibling;)if(e=3===g.nodeType?g.nodeValue:g.textContent,0<e.length)return!1;b=b.parentNode}return!0},isMediumEditorElement:function(b){return b&&b.getAttribute&&!!b.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(b){return d.traverseUp(b,function(e){return d.isMediumEditorElement(e)})},isBlockContainer:function(b){return b&&3!==b.nodeType&&-1!==d.blockContainerElementNames.indexOf(b.nodeName.toLowerCase())},getClosestBlockContainer:function(b){return d.traverseUp(b,function(e){return d.isBlockContainer(e)||d.isMediumEditorElement(e)})},getTopBlockContainer:function(b){var e=d.isBlockContainer(b)?b:!1;d.traverseUp(b,function(g){d.isBlockContainer(g)&&(e=g);return!e&&d.isMediumEditorElement(g)?(e=g,!0):!1});return e},getFirstSelectableLeafNode:function(b){for(;b&&b.firstChild;)b=b.firstChild;b=d.traverseUp(b,function(g){return-1===d.emptyElementNames.indexOf(g.nodeName.toLowerCase())});if("table"===b.nodeName.toLowerCase()){var e=b.querySelector("th, td");e&&(b=e)}return b},getFirstTextNode:function(b){d.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0");return d._getFirstTextNode(b)},_getFirstTextNode:function(b){if(3===b.nodeType)return b;for(var e=0;e<b.childNodes.length;e++){var g=d._getFirstTextNode(b.childNodes[e]);if(null!==g)return g}return null},ensureUrlHasProtocol:function(b){return-1===b.indexOf("://")?"http://"+b:b},warn:function(){void 0!==u.console&&"function"===typeof u.console.warn&&u.console.warn.apply(u.console,arguments)},deprecated:function(b,e,g){b=b+" is deprecated, please use "+e+" instead.";g&&(b+=" Will be removed in "+g);d.warn(b)},deprecatedMethod:function(b,e,g,p){d.deprecated(b,e,p);"function"===typeof this[e]&&this[e].apply(this,g)},cleanupAttrs:function(b,e){e.forEach(function(g){b.removeAttribute(g)})},cleanupTags:function(b,e){-1!==e.indexOf(b.nodeName.toLowerCase())&&b.parentNode.removeChild(b)},unwrapTags:function(b,e){-1!==e.indexOf(b.nodeName.toLowerCase())&&f.util.unwrap(b,document)},getClosestTag:function(b,e){return d.traverseUp(b,function(g){return g.nodeName.toLowerCase()===e.toLowerCase()})},unwrap:function(b,e){e=e.createDocumentFragment();for(var g=Array.prototype.slice.call(b.childNodes),p=0;p<g.length;p++)e.appendChild(g[p]);e.childNodes.length?b.parentNode.replaceChild(e,b):b.parentNode.removeChild(b)},guid:function(){function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()}};f.util=d})(window);(function(){var u=function(a){f.util.extend(this,a)};u.extend=function(a){var c=this;var k=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return c.apply(this,arguments)};f.util.extend(k,c);var l=function(){this.constructor=k};l.prototype=c.prototype;k.prototype=new l;a&&f.util.extend(k.prototype,a);return k};u.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(a){return this.base.options[a]}};["execAction","on","off","subscribe","trigger"].forEach(function(a){u.prototype[a]=function(){return this.base[a].apply(this.base,arguments)}});f.Extension=u})();(function(){function u(a){return f.util.isBlockContainer(a)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}f.selection={findMatchingSelectionParent:function(a,c){c=c.getSelection();if(0===c.rangeCount)return!1;c=c.getRangeAt(0).commonAncestorContainer;return f.util.traverseUp(c,a)},getSelectionElement:function(a){return this.findMatchingSelectionParent(function(c){return f.util.isMediumEditorElement(c)},a)},exportSelection:function(a,c,k){if(!a)return null;var l=null,d=c.getSelection();if(0<d.rangeCount){d=d.getRangeAt(0);l=d.cloneRange();l.selectNodeContents(a);l.setEnd(d.startContainer,d.startOffset);var b=l.toString().length;l={start:b,end:b+d.toString().length};this.doesRangeStartWithImages(d,c)&&(l.startsWithImage=!0);var e=this.getTrailingImageCount(a,l,d.endContainer,d.endOffset);e&&(l.trailingImageCount=e);0!==b&&(a=this.getIndexRelativeToAdjacentEmptyBlocks(c,a,d.startContainer,d.startOffset),-1!==a&&(l.emptyBlocksIndex=a));"undefined"!==typeof k&&k&&(l.fixedRange=d)}return l},importSelection:function(a,c,k,l){if(a&&c){if(a.fixedRange)var d=a.fixedRange;else{d=k.createRange();d.setStart(c,0);d.collapse(!0);var b=c,e=[],g=0,p=!1,q=!1,r=0,v=!1,x,A=!1,y=null;if(l||a.startsWithImage||"undefined"!==typeof a.emptyBlocksIndex)A=!0;for(;!v&&b;)if(3<b.nodeType)b=e.pop();else{if(3!==b.nodeType||q){if(a.trailingImageCount&&q&&("img"===b.nodeName.toLowerCase()&&r++,r===a.trailingImageCount)){for(v=0;b.parentNode.childNodes[v]!==b;)v++;d.setEnd(b.parentNode,v+1);v=!0}if(!v&&1===b.nodeType)for(x=b.childNodes.length-1;0<=x;)e.push(b.childNodes[x]),--x}else x=g+b.length,!p&&a.start>=g&&a.start<=x&&(A||a.start<x?(d.setStart(b,a.start-g),p=!0):y=b),p&&a.end>=g&&a.end<=x&&(a.trailingImageCount?q=!0:(d.setEnd(b,a.end-g),v=!0)),g=x;v||(b=e.pop())}!p&&y&&(d.setStart(y,y.length),d.setEnd(y,y.length));"undefined"!==typeof a.emptyBlocksIndex&&(d=this.importSelectionMoveCursorPastBlocks(k,c,a.emptyBlocksIndex,d));l&&(d=this.importSelectionMoveCursorPastAnchor(a,d))}this.selectRange(k,d)}},importSelectionMoveCursorPastAnchor:function(a,c){var k=function(d){return"a"===d.nodeName.toLowerCase()};if(a.start===a.end&&3===c.startContainer.nodeType&&c.startOffset===c.startContainer.nodeValue.length&&f.util.traverseUp(c.startContainer,k)){k=c.startContainer;for(a=c.startContainer.parentNode;null!==a&&"a"!==a.nodeName.toLowerCase();)a.childNodes[a.childNodes.length-1]!==k?a=null:(k=a,a=a.parentNode);if(null!==a&&"a"===a.nodeName.toLowerCase()){k=null;for(var l=0;null===k&&l<a.parentNode.childNodes.length;l++)a.parentNode.childNodes[l]===a&&(k=l);c.setStart(a.parentNode,k+1);c.collapse(!0)}}return c},importSelectionMoveCursorPastBlocks:function(a,c,k,l){a=a.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,u,!1);var d=l.startContainer;c=0;k=k||1;for(d=3===d.nodeType&&f.util.isBlockContainer(d.previousSibling)?d.previousSibling:f.util.getClosestBlockContainer(d);a.nextNode();)if(b){var b=a.currentNode;c++;if(c===k)break;if(0<b.textContent.length)break}else d===a.currentNode&&(b=a.currentNode);b||(b=d);l.setStart(f.util.getFirstSelectableLeafNode(b),0);return l},getIndexRelativeToAdjacentEmptyBlocks:function(a,c,k,l){if(0<k.textContent.length&&0<l)return-1;var d=k;3!==d.nodeType&&(d=k.childNodes[l]);if(d){if(!f.util.isElementAtBeginningOfBlock(d))return-1;l=f.util.findPreviousSibling(d);if(!l||l.nodeValue)return-1}k=f.util.getClosestBlockContainer(k);a=a.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,u,!1);for(c=0;a.nextNode();){if((l=""===a.currentNode.textContent)||0<c)c+=1;if(a.currentNode===k)break;l||(c=0)}return c},doesRangeStartWithImages:function(a,c){if(0!==a.startOffset||1!==a.startContainer.nodeType)return!1;if("img"===a.startContainer.nodeName.toLowerCase())return!0;var k=a.startContainer.querySelector("img");if(!k)return!1;for(a=c.createTreeWalker(a.startContainer,NodeFilter.SHOW_ALL,null,!1);a.nextNode();){c=a.currentNode;if(c===k)break;if(c.nodeValue)return!1}return!0},getTrailingImageCount:function(a,c,k,l){if(0===l||1!==k.nodeType||"img"!==k.nodeName.toLowerCase()&&!k.querySelector("img"))return 0;for(k=k.childNodes[l-1];k.hasChildNodes();)k=k.lastChild;l=[];for(var d=0,b=!1,e=!1,g=!1,p,q=0;!g&&a;)if(3<a.nodeType)a=l.pop();else{if(3!==a.nodeType||e)if("img"===a.nodeName.toLowerCase()&&q++,a===k)g=!0;else{if(1===a.nodeType)for(p=a.childNodes.length-1;0<=p;)l.push(a.childNodes[p]),--p}else q=0,p=d+a.length,!b&&c.start>=d&&c.start<=p&&(b=!0),b&&c.end>=d&&c.end<=p&&(e=!0),d=p;g||(a=l.pop())}return q},selectionContainsContent:function(a){a=a.getSelection();return a&&!a.isCollapsed&&a.rangeCount?""!==a.toString().trim()?!0:(a=this.getSelectedParentElement(a.getRangeAt(0)))&&("img"===a.nodeName.toLowerCase()||1===a.nodeType&&a.querySelector("img"))?!0:!1:!1},selectionInContentEditableFalse:function(a){var c;a=this.findMatchingSelectionParent(function(k){var l=k&&k.getAttribute("contenteditable");"true"===l&&(c=!0);return"#text"!==k.nodeName&&"false"===l},a);return!c&&a},getSelectionHtml:function(a){var c="",k=a.getSelection();if(k.rangeCount){var l=a.createElement("div");a=0;for(c=k.rangeCount;a<c;a+=1)l.appendChild(k.getRangeAt(a).cloneContents());c=l.innerHTML}return c},getCaretOffsets:function(a,c){c||(c=window.getSelection().getRangeAt(0));var k=c.cloneRange();var l=c.cloneRange();k.selectNodeContents(a);k.setEnd(c.endContainer,c.endOffset);l.selectNodeContents(a);l.setStart(c.endContainer,c.endOffset);return{left:k.toString().length,right:l.toString().length}},rangeSelectsSingleNode:function(a){var c=a.startContainer;return c===a.endContainer&&c.hasChildNodes()&&a.endOffset===a.startOffset+1},getSelectedParentElement:function(a){return a?this.rangeSelectsSingleNode(a)&&3!==a.startContainer.childNodes[a.startOffset].nodeType?a.startContainer.childNodes[a.startOffset]:3===a.startContainer.nodeType?a.startContainer.parentNode:a.startContainer:null},getSelectedElements:function(a){var c=a.getSelection();if(!c.rangeCount||c.isCollapsed||!c.getRangeAt(0).commonAncestorContainer)return[];var k=c.getRangeAt(0);if(3===k.commonAncestorContainer.nodeType){a=[];for(k=k.commonAncestorContainer;k.parentNode&&1===k.parentNode.childNodes.length;)a.push(k.parentNode),k=k.parentNode;return a}return[].filter.call(k.commonAncestorContainer.getElementsByTagName("*"),function(l){return"function"===typeof c.containsNode?c.containsNode(l,!0):!0})},selectNode:function(a,c){var k=c.createRange();k.selectNodeContents(a);this.selectRange(c,k)},select:function(a,c,k,l,d){var b=a.createRange();b.setStart(c,k);l?b.setEnd(l,d):b.collapse(!0);this.selectRange(a,b);return b},clearSelection:function(a,c){c?a.getSelection().collapseToStart():a.getSelection().collapseToEnd()},moveCursor:function(a,c,k){this.select(a,c,k)},getSelectionRange:function(a){a=a.getSelection();return 0===a.rangeCount?null:a.getRangeAt(0)},selectRange:function(a,c){a=a.getSelection();a.removeAllRanges();a.addRange(c)},getSelectionStart:function(a){return(a=a.getSelection().anchorNode)&&3===a.nodeType?a.parentNode:a}}})();(function(){function u(c,k){return c?c.some(function(l){if("function"!==typeof l.getInteractionElements)return!1;l=l.getInteractionElements();if(!l)return!1;Array.isArray(l)||(l=[l]);return l.some(function(d){return f.util.isDescendant(d,k,!0)})}):!1}var a=function(c){this.base=c;this.options=this.base.options;this.events=[];this.disabledEvents={};this.customEvents={};this.listeners={}};a.prototype={InputEventOnContenteditableSupported:!f.util.isIE&&!f.util.isEdge,attachDOMEvent:function(c,k,l,d){var b=this.base.options.contentWindow,e=this.base.options.ownerDocument;c=f.util.isElement(c)||-1<[b,e].indexOf(c)?[c]:c;Array.prototype.forEach.call(c,function(g){g.addEventListener(k,l,d);this.events.push([g,k,l,d])}.bind(this))},detachDOMEvent:function(c,k,l,d){var b,e,g=this.base.options.contentWindow,p=this.base.options.ownerDocument;c&&(c=f.util.isElement(c)||-1<[g,p].indexOf(c)?[c]:c,Array.prototype.forEach.call(c,function(q){b=this.indexOfListener(q,k,l,d);-1!==b&&(e=this.events.splice(b,1)[0],e[0].removeEventListener(e[1],e[2],e[3]))}.bind(this)))},indexOfListener:function(c,k,l,d){var b;var e=0;for(b=this.events.length;e<b;e+=1){var g=this.events[e];if(g[0]===c&&g[1]===k&&g[2]===l&&g[3]===d)return e}return-1},detachAllDOMEvents:function(){for(var c=this.events.pop();c;)c[0].removeEventListener(c[1],c[2],c[3]),c=this.events.pop()},detachAllEventsFromElement:function(c){for(var k=this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===c.getAttribute("medium-editor-index")}),l=0,d=k.length;l<d;l++){var b=k[l];this.detachDOMEvent(b[0],b[1],b[2],b[3])}},attachAllEventsToElement:function(c){this.listeners.editableInput&&(this.contentCache[c.getAttribute("medium-editor-index")]=c.innerHTML);this.eventsCache&&this.eventsCache.forEach(function(k){this.attachDOMEvent(c,k.name,k.handler.bind(this))},this)},enableCustomEvent:function(c){void 0!==this.disabledEvents[c]&&delete this.disabledEvents[c]},disableCustomEvent:function(c){this.disabledEvents[c]=!0},attachCustomEvent:function(c,k){this.setupListener(c);this.customEvents[c]||(this.customEvents[c]=[]);this.customEvents[c].push(k)},detachCustomEvent:function(c,k){k=this.indexOfCustomListener(c,k);-1!==k&&this.customEvents[c].splice(k,1)},indexOfCustomListener:function(c,k){return this.customEvents[c]&&this.customEvents[c].length?this.customEvents[c].indexOf(k):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(c,k,l){this.customEvents[c]&&!this.disabledEvents[c]&&this.customEvents[c].forEach(function(d){d(k,l)})},destroy:function(){this.detachAllDOMEvents();this.detachAllCustomEvents();this.detachExecCommand();this.base.elements&&this.base.elements.forEach(function(c){c.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(c){this.handleDocumentExecCommand(c)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var c=this.options.ownerDocument;if(this.execCommandListener&&c.execCommand.listeners){var k=c.execCommand.listeners.indexOf(this.execCommandListener);-1!==k&&c.execCommand.listeners.splice(k,1);c.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var c=this.options.ownerDocument;if(!c.execCommand.listeners){var k=function(d,b){c.execCommand.listeners&&c.execCommand.listeners.forEach(function(e){e({command:d[0],value:d[2],args:d,result:b})})},l=function(){var d=c.execCommand.orig.apply(this,arguments);if(!c.execCommand.listeners)return d;var b=Array.prototype.slice.call(arguments);k(b,d);return d};l.orig=c.execCommand;l.listeners=[];l.callListeners=k;c.execCommand=l}},unwrapExecCommand:function(){var c=this.options.ownerDocument;c.execCommand.orig&&(c.execCommand=c.execCommand.orig)},setupListener:function(c){if(!this.listeners[c]){switch(c){case "externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0);this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0);this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case "blur":this.setupListener("externalInteraction");break;case "focus":this.setupListener("externalInteraction");break;case "editableInput":this.contentCache={};this.base.elements.forEach(function(k){this.contentCache[k.getAttribute("medium-editor-index")]=k.innerHTML},this);this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput);this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case "editableClick":this.attachToEachElement("click",this.handleClick);break;case "editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case "editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case "editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case "editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case "editableKeydownSpace":this.setupListener("editableKeydown");break;case "editableKeydownEnter":this.setupListener("editableKeydown");break;case "editableKeydownTab":this.setupListener("editableKeydown");break;case "editableKeydownDelete":this.setupListener("editableKeydown");break;case "editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case "editableDrag":this.attachToEachElement("dragover",this.handleDragging);this.attachToEachElement("dragleave",this.handleDragging);break;case "editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case "editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[c]=!0}},attachToEachElement:function(c,k){this.eventsCache||(this.eventsCache=[]);this.base.elements.forEach(function(l){this.attachDOMEvent(l,c,k.bind(this))},this);this.eventsCache.push({name:c,handler:k})},cleanupElement:function(c){var k=c.getAttribute("medium-editor-index");k&&(this.detachAllEventsFromElement(c),this.contentCache&&delete this.contentCache[k])},focusElement:function(c){c.focus();this.updateFocus(c,{target:c,type:"focus"})},updateFocus:function(c,k){var l=this.base.getFocusedElement(),d;l&&"click"===k.type&&this.lastMousedownTarget&&(f.util.isDescendant(l,this.lastMousedownTarget,!0)||u(this.base.extensions,this.lastMousedownTarget))&&(d=l);d||this.base.elements.some(function(e){!d&&f.util.isDescendant(e,c,!0)&&(d=e);return!!d},this);var b=!f.util.isDescendant(l,c,!0)&&!u(this.base.extensions,c);d!==l&&(l&&b&&(l.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",k,l)),d&&(d.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",k,d)));b&&this.triggerCustomEvent("externalInteraction",k)},updateInput:function(c,k){if(this.contentCache){var l=c.getAttribute("medium-editor-index"),d=c.innerHTML;d!==this.contentCache[l]&&this.triggerCustomEvent("editableInput",k,c);this.contentCache[l]=d}},handleDocumentSelectionChange:function(c){if(c.currentTarget&&c.currentTarget.activeElement){var k=c.currentTarget.activeElement,l;this.base.elements.some(function(d){return f.util.isDescendant(d,k,!0)?(l=d,!0):!1},this);l&&this.updateInput(l,{target:k,currentTarget:l})}},handleDocumentExecCommand:function(){var c=this.base.getFocusedElement();c&&this.updateInput(c,{target:c,currentTarget:c})},handleBodyClick:function(c){this.updateFocus(c.target,c)},handleBodyFocus:function(c){this.updateFocus(c.target,c)},handleBodyMousedown:function(c){this.lastMousedownTarget=c.target},handleInput:function(c){this.updateInput(c.currentTarget,c)},handleClick:function(c){this.triggerCustomEvent("editableClick",c,c.currentTarget)},handleBlur:function(c){this.triggerCustomEvent("editableBlur",c,c.currentTarget)},handleKeypress:function(c){this.triggerCustomEvent("editableKeypress",c,c.currentTarget);if(this.keypressUpdateInput){var k={target:c.target,currentTarget:c.currentTarget};setTimeout(function(){this.updateInput(k.currentTarget,k)}.bind(this),0)}},handleKeyup:function(c){this.triggerCustomEvent("editableKeyup",c,c.currentTarget)},handleMouseover:function(c){this.triggerCustomEvent("editableMouseover",c,c.currentTarget)},handleDragging:function(c){this.triggerCustomEvent("editableDrag",c,c.currentTarget)},handleDrop:function(c){this.triggerCustomEvent("editableDrop",c,c.currentTarget)},handlePaste:function(c){this.triggerCustomEvent("editablePaste",c,c.currentTarget)},handleKeydown:function(c){this.triggerCustomEvent("editableKeydown",c,c.currentTarget);if(f.util.isKey(c,f.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",c,c.currentTarget);if(f.util.isKey(c,f.util.keyCode.ENTER)||c.ctrlKey&&f.util.isKey(c,f.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",c,c.currentTarget);if(f.util.isKey(c,f.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",c,c.currentTarget);if(f.util.isKey(c,[f.util.keyCode.DELETE,f.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",c,c.currentTarget)}};f.Events=a})();(function(){var u=f.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(a){u.isBuiltInButton(a)?f.Extension.call(this,this.defaults[a]):f.Extension.call(this,a)},init:function(){f.Extension.prototype.init.apply(this,arguments);this.button=this.createButton();$(this.button).click(this.handleClick.bind(this))},getButton:function(){var a=this.button,c=$(".medium-editor-toolbar button.medium-editor-action:visible").filter(function(k,l){return $(l).attr("data-action")==$(a).attr("data-action")});return c.length?c[0]:a},getAction:function(){return"function"===typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"===typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"===typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var a=this.document.createElement("button"),c=this.contentDefault,k=this.getAria(),l=this.getEditorOption("buttonLabels");a.classList.add("medium-editor-action");a.classList.add("tooltippable");a.classList.add("medium-editor-action-"+this.name);this.classList&&this.classList.forEach(function(d){a.classList.add(d)});a.setAttribute("data-action",this.getAction());k&&(a.setAttribute("data-tooltip-title",k),a.setAttribute("data-tooltip-class","tooltipPlaceholder"),a.setAttribute("data-tooltip-container",".featureForm"),a.setAttribute("data-tooltip-placement","top"),a.setAttribute("aria-label",k));this.attrs&&Object.keys(this.attrs).forEach(function(d){a.setAttribute(d,this.attrs[d])},this);"fontawesome"===l&&this.contentFA&&(c=this.contentFA);a.innerHTML=c;return a},handleClick:function(a){a.preventDefault();a.stopPropagation();if(a=this.getAction())this.execAction(a),this.isActive()?this.setInactive():this.setActive()},isActive:function(){return this.getButton().classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.getButton().classList.remove(this.getEditorOption("activeButtonClass"));delete this.knownState},setActive:function(){this.getButton().classList.add(this.getEditorOption("activeButtonClass"));delete this.knownState},queryCommandState:function(){var a=null;this.useQueryState&&(a=this.base.queryCommandState(this.getAction()));return a},isAlreadyApplied:function(a){var c=!1,k=this.getTagNames();if(!1===this.knownState||!0===this.knownState)return this.knownState;k&&0<k.length&&(c=-1!==k.indexOf(a.nodeName.toLowerCase()));if(!c&&this.style){k=this.style.value.split("|");var l=this.window.getComputedStyle(a,null).getPropertyValue(this.style.prop);k.forEach(function(d){this.knownState||!(c=-1!==l.indexOf(d))&&"text-decoration"===this.style.prop||(this.knownState=c)},this)}return c}});u.isBuiltInButton=function(a){return"string"===typeof a&&f.extensions.button.prototype.defaults.hasOwnProperty(a)};f.extensions.button=u})();f.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"Bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:'<i class="material-icons">format_bold</i>',contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"Italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:'<i class="material-icons">format_italic</i>',contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"Underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:'<i class="material-icons">format_underlined</i>',contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"Ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:'<i class="material-icons">format_list_numbered</i>',contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"Unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:'<i class="material-icons">format_list_bulleted</i>',contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"Center align",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:'<i class="material-icons">format_align_center</i>',contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"Justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:'<i class="material-icons">format_align_justify</i>',contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"Left align",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:'<i class="material-icons">format_align_left</i>',contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"Right align",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:'<i class="material-icons">format_align_right</i>',contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"Quote",tagNames:["blockquote"],contentDefault:'<i class="material-icons">format_quote</i>',contentFA:'<i class="material-icons">format_quote</i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"Header 1",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"Header 2",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"Header 3",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}};(function(){var u=f.extensions.button.extend({init:function(){f.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(a){return this.hasForm?this.getForm(a).classList.contains(this.activeClass):!1},showForm:function(a){this.hasForm&&this.getForm(a).classList.add(this.activeClass)},hideForm:function(a){this.hasForm&&this.getForm(a).classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var a=this.base.getExtensionByName("toolbar");a&&a.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var a=this.base.getExtensionByName("toolbar");a&&a.hideToolbarDefaultActions()},setToolbarPosition:function(a){var c=f.selection.getSelectionRange(this.document),k=this.getForm(a);a=c.getBoundingClientRect();c=k.getBoundingClientRect();var l=k.parentElement.getBoundingClientRect(),d={top:a.top-l.top-c.height-5,left:a.left-l.left+a.width/2-c.width/2};["top","left","right"].forEach(function(b){k.style[b]=d[b]+(isNaN(d[b])?"":"px")})}});f.extensions.form=u})();(function(){var u=f.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"Link",tagNames:["a"],contentDefault:'<i class="material-icons">link</i>',contentFA:'<i class="fa fa-link"></i>',init:function(){f.extensions.form.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(a){a.preventDefault();a.stopPropagation();a=$(a.target).closest(".medium-editor-toolbar");var c=f.selection.getSelectionRange(this.document);if("a"===c.startContainer.nodeName.toLowerCase()||"a"===c.endContainer.nodeName.toLowerCase()||f.util.getClosestTag(f.selection.getSelectedParentElement(c),"a"))return this.execAction("unlink");this.isDisplayed(a)||this.showForm(null,a);return!1},handleKeydown:function(a){f.util.isKey(a,f.util.keyCode.K)&&f.util.isMetaCtrlKey(a)&&!a.shiftKey&&this.handleClick(a)},getForm:function(a){a&&(a=$(a).find(".medium-editor-toolbar-form"),0<a.length&&(this.form=a[0]));this.form||(this.form=this.createForm());return this.form},getTemplate:function(){var a=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];a.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>");a.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>");this.targetCheckbox&&a.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>");this.customClassOption&&a.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>");return a.join("")},isDisplayed:function(a){return f.extensions.form.prototype.isDisplayed.apply(this,a)},hideForm:function(a){f.extensions.form.prototype.hideForm.apply(this,a);this.getInput(a).value=""},showForm:function(a,c){var k=f.selection.getSelectionRange(this.document);if(k){var l=!1;this.getEditorElements().forEach(function(g){0<$(g).find(k.startContainer).length&&(l=!0)},this);if(l){var d=this.getInput(c),b=this.getAnchorTargetCheckbox(c),e=this.getAnchorButtonCheckbox(c);a=a||{value:""};"string"===typeof a&&(a={value:a});this.base.saveSelection(!0);this.hideToolbarDefaultActions();f.extensions.form.prototype.showForm.apply(this,c);this.setToolbarPosition(c);d.value=a.value;d.focus();b&&(b.checked="_blank"===a.target);e&&(a=a.buttonClass?a.buttonClass.split(" "):[],e.checked=-1!==a.indexOf(this.customClassOption))}}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},getFormOpts:function(a){var c=this.getAnchorTargetCheckbox(a),k=this.getAnchorButtonCheckbox(a);a={value:this.getInput(a).value.trim()};this.linkValidation&&(a.value=this.checkLinkFormat(a.value));a.target="_self";c&&c.checked&&(a.target="_blank");k&&k.checked&&(a.buttonClass=this.customClassOption);return a},doFormSave:function(a){a=this.getFormOpts(a);this.completeFormSave(a)},completeFormSave:function(a){this.base.restoreSelection();this.execAction(this.action,a);this.base.checkSelection()},ensureEncodedUri:function(a){return a===decodeURI(a)?encodeURI(a):a},ensureEncodedUriComponent:function(a){return a===decodeURIComponent(a)?encodeURIComponent(a):a},ensureEncodedParam:function(a){a=a.split("=");var c=a[1];return a[0]+(void 0===c?"":"="+this.ensureEncodedUriComponent(c))},ensureEncodedQuery:function(a){return a.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(a){var c=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^#/i.test(a),k="",l=a.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),d=l[1],b=l[2];l=l[3];if(/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/.test(a))return"tel:"+a;!c&&(a=d.split("/")[0],a.match(/.+(\.|:).+/)||"localhost"===a)&&(k="http://");return k+this.ensureEncodedUri(d)+(void 0===b?"":"?"+this.ensureEncodedQuery(b))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection();this.base.checkSelection()},attachFormEvents:function(a){var c=$(a).find(".medium-editor-toolbar-close"),k=$(a).find(".medium-editor-toolbar-save"),l=$(a).find(".medium-editor-toolbar-input");$(a).on("click",this.handleFormClick.bind(this));$(l).on("keyup",this.handleTextboxKeyup.bind(this));$(c).on("click",this.handleCloseClick.bind(this));$(k).on("click",this.handleSaveClick.bind(this))},createForm:function(){var a=this.document.createElement("div");a.className="medium-editor-toolbar-form";a.id="medium-editor-toolbar-form-anchor-"+this.getEditorId();a.innerHTML=this.getTemplate();this.attachFormEvents(a);return a},getInput:function(a){return $(this.getForm(a)).find("input.medium-editor-toolbar-input")[0]},getAnchorTargetCheckbox:function(a){return $(this.getForm(a)).find(".medium-editor-toolbar-anchor-target")[0]},getAnchorButtonCheckbox:function(a){return $(this.getForm(a)).find(".medium-editor-toolbar-anchor-button")[0]},handleTextboxKeyup:function(a){a.keyCode===f.util.keyCode.ENTER?(a.preventDefault(),this.doFormSave()):a.keyCode===f.util.keyCode.ESCAPE&&(a.preventDefault(),this.doFormCancel())},handleFormClick:function(a){a.stopPropagation()},handleSaveClick:function(a){a.preventDefault();a=$(a.target).closest(".medium-editor-toolbar");this.doFormSave(a)},handleCloseClick:function(a){a.preventDefault();this.doFormCancel()}});f.extensions.anchor=u})();(function(){var u=f.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview();this.getEditorOption("elementsContainer").appendChild(this.anchorPreview);this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var a=this.document.createElement("div");a.id="medium-editor-anchor-preview-"+this.getEditorId();a.className="medium-editor-anchor-preview";a.innerHTML=this.getTemplate();this.on(a,"click",this.handleClick.bind(this));return a},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview"><a class="medium-editor-toolbar-anchor-preview-inner"></a><a href="#" class="medium-editor-toolbar-save"><i class="material-icons">check</i></a><a href="#" class="medium-editor-toolbar-close"><i class="material-icons">close</i></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active");this.activeAnchor=null},showPreview:function(a){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||a.getAttribute("data-disable-preview")||this.base.getExtensionByName("anchor").isDisplayed())return!0;this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=a.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=a.attributes.href.value);this.anchorPreview.classList.add("medium-toolbar-arrow-under");this.anchorPreview.classList.remove("medium-toolbar-arrow-over");this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active");this.activeAnchor=a;this.positionPreview();this.attachPreviewHandlers();return this},positionPreview:function(a){a=a||this.activeAnchor;var c=this.window.innerWidth,k=a.getBoundingClientRect(),l=this.diffLeft,d=this.getEditorOption("elementsContainer"),b=-1<["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position")),e={};a=this.anchorPreview.offsetWidth/2;var g=this.base.getExtensionByName("toolbar");g&&(l=g.diffLeft);l-=a;if(b){var p=d.getBoundingClientRect();["top","left"].forEach(function(q){e[q]=k[q]-p[q]});e.width=k.width;e.height=k.height;k=e;c=p.width;b=d.scrollTop}else b=this.window.pageYOffset;d=k.left+k.width/2;b+=k.top-this.anchorPreview.offsetHeight-5;this.anchorPreview.style.top=Math.round(b)+"px";this.anchorPreview.style.right="initial";d<a?(this.anchorPreview.style.left=l+a+"px",this.anchorPreview.style.right="initial"):c-d<a?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=l+d+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this));this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(a){var c=this.base.getExtensionByName("anchor"),k=this.activeAnchor;c&&k?(a.preventDefault(),this.base.selectElement(this.activeAnchor),setTimeout(function(){this.hidePreview();if(k){var l={value:k.attributes.href.value,target:k.getAttribute("target"),buttonClass:k.getAttribute("class")},d=this.base.getExtensionByName("toolbar");d=d.getToolbarElement($(d.relativeContainer));c.showForm(l,d);k=null}}.bind(this),50)):this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null;this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout);this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(a){a=f.util.getClosestTag(a.target,"a");if(!1!==a){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(a.outerHTML)||/href=["']#\S+["']/.test(a.outerHTML)))return!0;var c=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&c&&c.isDisplayed&&c.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==a&&this.detachPreviewHandlers();this.anchorToPreview=a;this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this);this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout);this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime();this.hovering=!0},handlePreviewMouseout:function(a){a.relatedTarget&&/anchor-preview/.test(a.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer);this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)));this.hidePreview();this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime();this.hovering=!0;this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this);this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this);this.intervalTimer=setInterval(this.updatePreview.bind(this),200);this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout);this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});f.extensions.anchorPreview=u})();(function(){var u=" \t\n\r     \u2028\u2029".split("");var a=/^(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$/i;var c=/(((?:(https?:\/\/|ftps?:\/\/|nntp:\/\/)|www\d{0,3}[.]|[a-z0-9.\-]+[.](com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\/)\S+(?:[^\s`!\[\]{};:'".,?«»“”‘’])))|(([a-z0-9\-]+\.)?[a-z0-9\-]+\.(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw))/gi;var k=f.Extension.extend({init:function(){f.Extension.prototype.init.apply(this,arguments);this.disableEventHandling=!1;this.subscribe("editableKeypress",this.onKeypress.bind(this));this.subscribe("editableBlur",this.onBlur.bind(this));this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var l=0,d=0;d<this.window._mediumEditors.length;d++){var b=this.window._mediumEditors[d];null!==b&&void 0!==b.getExtensionByName("autoLink")&&l++}return 1===l},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(l,d){this.performLinking(d)},onKeypress:function(l){!this.disableEventHandling&&f.util.isKey(l,[f.util.keyCode.SPACE,f.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var d=this.base.exportSelection();this.performLinking(l.target)&&this.base.importSelection(d,!0)}catch(b){window.console&&window.console.error("Failed to perform linking",b),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(l){var d=f.util.splitByBlockElements(l),b=!1;0===d.length&&(d=[l]);for(var e=0;e<d.length;e++)b=this.removeObsoleteAutoLinkSpans(d[e])||b,b=this.performLinkingWithinElement(d[e])||b;this.base.events.updateInput(l,{target:l,currentTarget:l});return b},removeObsoleteAutoLinkSpans:function(l){if(!l||3===l.nodeType)return!1;l=l.querySelectorAll('span[data-auto-link="true"]');for(var d=!1,b=0;b<l.length;b++){var e=l[b].textContent;-1===e.indexOf("://")&&(e=f.util.ensureUrlHasProtocol(e));if(l[b].getAttribute("data-href")!==e&&!f.util.getClosestTag(l[b],"a")){d=!0;var g=e.replace(/\s+$/,"");l[b].getAttribute("data-href")===g?(e=f.util.splitOffDOMTree(l[b],this.splitTextBeforeEnd(l[b],e.length-g.length)),l[b].parentNode.insertBefore(e,l[b].nextSibling)):f.util.unwrap(l[b],this.document)}}return d},splitTextBeforeEnd:function(l,d){l=this.document.createTreeWalker(l,NodeFilter.SHOW_TEXT,null,!1);for(var b=!0;b;)b=null!==l.lastChild();for(var e;0<d&&null!==e;)e=l.currentNode,b=e.nodeValue,b.length>d?(e=e.splitText(b.length-d),d=0):(e=l.previousNode(),d-=b.length);return e},performLinkingWithinElement:function(l){for(var d=this.findLinkableText(l),b=0;b<d.length;b++){var e=f.util.findOrCreateMatchingTextNodes(this.document,l,d[b]);this.shouldNotLink(e)||this.createAutoLink(e,d[b].href)}return!1},shouldNotLink:function(l){for(var d=!1,b=0;b<l.length&&!1===d;b++)d=!!f.util.traverseUp(l[b],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return d},findLinkableText:function(l){l=l.textContent;for(var d,b=[];null!==(d=c.exec(l));){var e,g=d.index+d[0].length;(e=(e=(0===d.index||-1!==u.indexOf(l[d.index-1]))&&(g===l.length||-1!==u.indexOf(l[g])))&&(-1!==d[0].indexOf("/")||a.test(d[0].split(".").pop().split("?").shift())))&&b.push({href:d[0],start:d.index,end:g})}return b},createAutoLink:function(l,d){d=f.util.ensureUrlHasProtocol(d);l=f.util.createLink(this.document,l,d,this.getEditorOption("targetBlank")?"_blank":null);var b=this.document.createElement("span");b.setAttribute("data-auto-link","true");b.setAttribute("data-href",d);for(l.insertBefore(b,l.firstChild);1<l.childNodes.length;)b.appendChild(l.childNodes[1])}});f.extensions.autoLink=k})();(function(){function u(c){c=f.util.getContainerEditorElement(c);Array.prototype.slice.call(c.parentElement.querySelectorAll(".medium-editor-dragover")).forEach(function(k){k.classList.remove("medium-editor-dragover")})}var a=f.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){f.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(c){c.preventDefault();c.dataTransfer.dropEffect="copy";var k=c.target.classList?c.target:c.target.parentElement;u(k);"dragover"===c.type&&k.classList.add("medium-editor-dragover")},handleDrop:function(c){c.preventDefault();c.stopPropagation();this.base.selectElement(c.target);var k=this.base.exportSelection();k.start=k.end;this.base.importSelection(k);u(c.target)},isAllowedFile:function(c){return this.allowedTypes.some(function(k){return!!c.type.match(k)})},insertImageFile:function(c){if("function"===typeof FileReader){var k=new FileReader;k.readAsDataURL(c);k.addEventListener("load",function(l){var d=this.document.createElement("img");d.src=l.target.result;f.util.insertHTMLCommand(this.document,d.outerHTML)}.bind(this))}}});f.extensions.fileDragging=a})();(function(){var u=f.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){f.Extension.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this));this.keys={};this.commands.forEach(function(a){var c=a.key.charCodeAt(0);this.keys[c]||(this.keys[c]=[]);this.keys[c].push(a)},this)},handleKeydown:function(a){var c=f.util.getKeyCode(a);if(this.keys[c]){var k=f.util.isMetaCtrlKey(a),l=!!a.shiftKey,d=!!a.altKey;this.keys[c].forEach(function(b){b.meta!==k||b.shift!==l||b.alt!==d&&void 0!==b.alt||(a.preventDefault(),a.stopPropagation(),"function"===typeof b.command?b.command.apply(this):!1!==b.command&&this.execAction(b.command))},this)}}});f.extensions.keyboardCommands=u})();(function(){var u=f.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){f.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(a){a.preventDefault();a.stopPropagation();this.isDisplayed()||(a=this.document.queryCommandValue("fontName")+"",this.showForm(a));return!1},getForm:function(){this.form||(this.form=this.createForm());return this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none";this.getSelect().value=""},showForm:function(a){var c=this.getSelect();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();c.value=a||"";c.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontName();this.base.checkSelection()},createForm:function(){var a=this.document,c=a.createElement("div"),k=a.createElement("select"),l=a.createElement("a"),d=a.createElement("a");c.className="medium-editor-toolbar-form";c.id="medium-editor-toolbar-form-fontname-"+this.getEditorId();this.on(c,"click",this.handleFormClick.bind(this));for(var b=0;b<this.fonts.length;b++){var e=a.createElement("option");e.innerHTML=this.fonts[b];e.value=this.fonts[b];k.appendChild(e)}k.className="medium-editor-toolbar-select";c.appendChild(k);this.on(k,"change",this.handleFontChange.bind(this));d.setAttribute("href","#");d.className="medium-editor-toobar-save";d.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;";c.appendChild(d);this.on(d,"click",this.handleSaveClick.bind(this),!0);l.setAttribute("href","#");l.className="medium-editor-toobar-close";l.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;";c.appendChild(l);this.on(l,"click",this.handleCloseClick.bind(this));return c},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){f.selection.getSelectedElements(this.document).forEach(function(a){"font"===a.nodeName.toLowerCase()&&a.hasAttribute("face")&&a.removeAttribute("face")})},handleFontChange:function(){var a=this.getSelect().value;""===a?this.clearFontName():this.execAction("fontName",{value:a})},handleFormClick:function(a){a.stopPropagation()},handleSaveClick:function(a){a.preventDefault();this.doFormSave()},handleCloseClick:function(a){a.preventDefault();this.doFormCancel()}});f.extensions.fontName=u})();(function(){var u=f.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){f.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(a){a.preventDefault();a.stopPropagation();this.isDisplayed()||(a=this.document.queryCommandValue("fontSize")+
"",this.showForm(a));return!1},getForm:function(){this.form||(this.form=this.createForm());return this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none";this.getInput().value=""},showForm:function(a){var c=this.getInput();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();c.value=a||"";c.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontSize();this.base.checkSelection()},createForm:function(){var a=this.document,c=a.createElement("div"),k=a.createElement("input"),l=a.createElement("a");a=a.createElement("a");c.className="medium-editor-toolbar-form";c.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId();this.on(c,"click",this.handleFormClick.bind(this));k.setAttribute("type","range");k.setAttribute("min","1");k.setAttribute("max","7");k.className="medium-editor-toolbar-input";c.appendChild(k);this.on(k,"change",this.handleSliderChange.bind(this));a.setAttribute("href","#");a.className="medium-editor-toobar-save";a.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;";c.appendChild(a);this.on(a,"click",this.handleSaveClick.bind(this),!0);l.setAttribute("href","#");l.className="medium-editor-toobar-close";l.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;";c.appendChild(l);this.on(l,"click",this.handleCloseClick.bind(this));return c},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){f.selection.getSelectedElements(this.document).forEach(function(a){"font"===a.nodeName.toLowerCase()&&a.hasAttribute("size")&&a.removeAttribute("size")})},handleSliderChange:function(){var a=this.getInput().value;"4"===a?this.clearFontSize():this.execAction("fontSize",{value:a})},handleFormClick:function(a){a.stopPropagation()},handleSaveClick:function(a){a.preventDefault();this.doFormSave()},handleCloseClick:function(a){a.preventDefault();this.doFormCancel()}});f.extensions.fontSize=u})();(function(){function u(d,b,e){d=d.clipboardData||b.clipboardData||e.dataTransfer;b={};if(!d)return b;d.getData&&(e=d.getData("Text"))&&0<e.length&&(b["text/plain"]=e);if(d.types)for(e=0;e<d.types.length;e++){var g=d.types[e];b[g]=d.getData(g)}return b}var a=null,c=null,k=function(d){d.stopPropagation()},l=f.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){f.Extension.prototype.init.apply(this,arguments);if(this.forcePlainText||this.cleanPastedHTML)this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(d){this.on(d,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this))},handleAddElement:function(d,b){this.on(b,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(d,b){if(!d.defaultPrevented){var e=u(d,this.window,this.document),g=e["text/html"];e=e["text/plain"];var p=!!d.clipboardData.files&&0<d.clipboardData.files.length;this.window.clipboardData&&void 0===d.clipboardData&&!g&&(g=e);var q=!1;if(p)q=!0;else try{q=/^(http(s?):)?\/\//i.test(e)&&0<$(".medium-insert-embeds-active").length}catch(r){}if(q)$(b).trigger($.Event(d));else if(g||e)d.preventDefault(),this.doPaste(g,e,b)}},doPaste:function(d,b,e){var g="";if(this.cleanPastedHTML&&d)return this.cleanPaste(d);if(b){if(this.getEditorOption("disableReturn")||e&&e.getAttribute("data-disable-return"))g=f.util.htmlEntities(b);else if(d=b.split(/[\r\n]+/g),1<d.length)for(b=0;b<d.length;b+=1)""!==d[b]&&(g+="<p>"+f.util.htmlEntities(d[b])+"</p>");else g=f.util.htmlEntities(d[0]);f.util.insertHTMLCommand(this.document,g)}},handlePasteBinPaste:function(d){if(d.defaultPrevented)this.removePasteBin();else{var b=u(d,this.window,this.document),e=b["text/html"],g=b["text/plain"],p=c;b=!!d.clipboardData.files&&0<d.clipboardData.files.length;if(f.util.isMac){var q=!1;if(b)q=!0;else try{q=/^(http(s?):)?\/\//i.test(g)&&0<$(".medium-insert-embeds-active").length}catch(r){}if(q){$(p).trigger($.Event(d));return}}this.cleanPastedHTML&&!e||b?setTimeout(function(){this.cleanPastedHTML&&(e=this.getPasteBinHtml());this.removePasteBin();this.doPaste(e,g,p);this.trigger("editablePaste",{currentTarget:p,target:p},p)}.bind(this),0):(d.preventDefault(),this.removePasteBin(),this.doPaste(e,g,p),this.trigger("editablePaste",{currentTarget:p,target:p},p))}},handleKeydown:function(d,b){f.util.isKey(d,f.util.keyCode.V)&&f.util.isMetaCtrlKey(d)&&(this.removePasteBin(),this.createPasteBin(b))},createPasteBin:function(d){var b=f.selection.getSelectionRange(this.document),e=this.window.pageYOffset;c=d;b&&(d=b.getClientRects(),e=d.length?e+d[0].top:void 0!==b.startContainer.getBoundingClientRect?e+b.startContainer.getBoundingClientRect().top:e+b.getBoundingClientRect().top);a=b;b=this.document.createElement("div");b.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now();b.setAttribute("style","border: 1px red solid; position: absolute; top: "+e+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0");b.setAttribute("contentEditable",!0);b.innerHTML="%ME_PASTEBIN%";this.document.body.appendChild(b);this.on(b,"focus",k);this.on(b,"focusin",k);this.on(b,"focusout",k);b.focus();f.selection.selectNode(b,this.document);this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this));this.on(b,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==a&&(f.selection.selectRange(this.document,a),a=null);null!==c&&(c=null);var d=this.getPasteBin();d&&d&&(this.off(d,"focus",k),this.off(d,"focusin",k),this.off(d,"focusout",k),this.off(d,"paste",this.boundHandlePaste),d.parentElement.removeChild(d))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var d=this.getPasteBin();return!d||d.firstChild&&"mcepastebin"===d.firstChild.id?!1:(d=d.innerHTML)&&"%ME_PASTEBIN%"!==d?d:!1},cleanPaste:function(d){var b;var e=/<p|<br|<div/.test(d);var g=[].concat(this.preCleanReplacements||[],[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]>/gi),"$1"]],this.cleanReplacements||[]);for(b=0;b<g.length;b+=1)d=d.replace(g[b][0],g[b][1]);if(!e)return this.pasteHTML(d);e=this.document.createElement("div");e.innerHTML="<p>"+d.split("<br><br>").join("</p><p>")+"</p>";d=e.querySelectorAll("a,p,div,br");for(b=0;b<d.length;b+=1)switch(g=d[b],g.innerHTML=g.innerHTML.replace(/\n/gi," "),g.nodeName.toLowerCase()){case "p":case "div":this.filterCommonBlocks(g);break;case "br":this.filterLineBreak(g)}this.pasteHTML(e.innerHTML)},pasteHTML:function(d,b){b=f.util.defaults({},b,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var e;var g=this.document.createDocumentFragment();g.appendChild(this.document.createElement("body"));g=g.querySelector("body");g.innerHTML=d;this.cleanupSpans(g);d=g.querySelectorAll("*");for(e=0;e<d.length;e+=1){var p=d[e];"a"===p.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&f.util.setTargetBlank(p);f.util.cleanupAttrs(p,b.cleanAttrs);f.util.cleanupTags(p,b.cleanTags);f.util.unwrapTags(p,b.unwrapTags)}f.util.insertHTMLCommand(this.document,g.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(d){return d&&("p"===d.nodeName.toLowerCase()||"div"===d.nodeName.toLowerCase())},filterCommonBlocks:function(d){/^\s*$/.test(d.textContent)&&d.parentNode&&d.parentNode.removeChild(d)},filterLineBreak:function(d){this.isCommonBlock(d.previousElementSibling)?this.removeWithParent(d):!this.isCommonBlock(d.parentNode)||d.parentNode.firstChild!==d&&d.parentNode.lastChild!==d?d.parentNode&&1===d.parentNode.childElementCount&&""===d.parentNode.textContent&&this.removeWithParent(d):this.removeWithParent(d)},removeWithParent:function(d){d&&d.parentNode&&(d.parentNode.parentNode&&1===d.parentNode.childElementCount?d.parentNode.parentNode.removeChild(d.parentNode):d.parentNode.removeChild(d))},cleanupSpans:function(d){var b,e=d.querySelectorAll(".replace-with"),g=function(r){return r&&"#text"!==r.nodeName&&"false"===r.getAttribute("contenteditable")};for(b=0;b<e.length;b+=1){var p=e[b];var q=this.document.createElement(p.classList.contains("bold")?"b":"i");p.classList.contains("bold")&&p.classList.contains("italic")?q.innerHTML="<i>"+
p.innerHTML+"</i>":q.innerHTML=p.innerHTML;p.parentNode.replaceChild(q,p)}e=d.querySelectorAll("span");for(b=0;b<e.length;b+=1){p=e[b];if(f.util.traverseUp(p,g))return!1;f.util.unwrap(p,this.document)}}});f.extensions.paste=l})();(function(){var u=f.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){f.Extension.prototype.init.apply(this,arguments);this.initPlaceholders();this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(a,c){this.initElement(c)},initElement:function(a){a.getAttribute("data-placeholder")||a.setAttribute("data-placeholder",this.text);this.updatePlaceholder(a)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(a,c){this.cleanupElement(c)},cleanupElement:function(a){a.getAttribute("data-placeholder")===this.text&&a.removeAttribute("data-placeholder")},showPlaceholder:function(a){a&&(f.util.isFF&&0===a.childNodes.length?(a.classList.add("medium-editor-placeholder-relative"),a.classList.remove("medium-editor-placeholder")):(a.classList.add("medium-editor-placeholder"),a.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(a){a&&(a.classList.remove("medium-editor-placeholder"),a.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(a,c){if(a.querySelector("img, blockquote, ul, ol, table")||""!==a.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(a);c||this.showPlaceholder(a)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableInput",this.handleInput.bind(this));this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("addElement",this.handleAddElement.bind(this));this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(a,c){a=this.hideOnClick&&c===this.base.getFocusedElement();this.updatePlaceholder(c,a)},handleFocus:function(a,c){this.hidePlaceholder(c)},handleBlur:function(a,c){this.updatePlaceholder(c)}});f.extensions.placeholder=u})();(function(){var u=f.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:"bold italic underline anchor h2 h3 quote".split(" "),diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){f.Extension.prototype.init.apply(this,arguments);this.initThrottledMethods();if(this.relativeContainer)if("string"===typeof this.relativeContainer){var a=this;$(this.relativeContainer).each(function(){var c=$(this);c.prepend(a.getToolbarElement(c))})}else this.relativeContainer.appendChild(this.getToolbarElement());else this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(a,c){return this.base.extensions.forEach(function(k){if(k!==this)return a.apply(c||this,arguments)},this)},createToolbar:function(){var a=this.document.createElement("div");a.id="medium-editor-toolbar-"+this.getEditorId();a.className="medium-editor-toolbar";a.className=this.static?a.className+" static-toolbar":this.relativeContainer?a.className+" medium-editor-relative-toolbar":a.className+" medium-editor-stalker-toolbar";a.appendChild(this.createToolbarButtons());this.forEachExtension(function(c){c.hasForm&&a.appendChild($(c.getForm()).clone(!0,!0)[0])});this.attachEventHandlers();return a},createToolbarButtons:function(){var a=this.document.createElement("ul"),c,k,l,d,b;a.id="medium-editor-toolbar-actions"+this.getEditorId();a.className="medium-editor-toolbar-actions";a.style.display="block";this.buttons.forEach(function(g){"string"===typeof g?(d=g,b=null):(d=g.name,b=g);(l=this.base.addBuiltInExtension(d,b))&&"function"===typeof l.getButton&&(k=$(l.getButton(this.base)).clone(!0,!0)[0],c=this.document.createElement("li"),f.util.isElement(k)?c.appendChild(k):c.innerHTML=k,c.setAttribute("data-button",d),a.appendChild(c))},this);var e=a.querySelectorAll("button");0<e.length&&(e[0].classList.add(this.firstButtonClass),e[e.length-1].classList.add(this.lastButtonClass));return a},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(a){if(a){var c=a.data("medium-editor-toolbar");c||(c=this.createToolbar(),a.data("medium-editor-toolbar",c));return c}this.toolbar||(this.toolbar=this.createToolbar());return this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=f.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableClick",this.handleEditableClick.bind(this));this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this));this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this));if(this.static&&this.sticky)this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0);this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(a){if(a&&a.target){var c=!1,k=this;$(this.relativeContainer).each(function(){c=c||f.util.isDescendant(k.getToolbarElement($(this)),a.target)});if(c)return!1}this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout);clearTimeout(this.delayShowTimeout);this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout);this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms();this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block");this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(a){a.hasForm&&a.isDisplayed()&&a.hideForm()})},multipleBlockElementsSelected:function(){var a=new RegExp("<("+f.util.blockContainerElementNames.join("|")+")[^>]*>","g");a=f.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,"").match(a);return!!a&&1<a.length},modifySelection:function(){var a=this.window.getSelection().getRangeAt(0);if(this.standardizeSelectionStart&&a.startContainer.nodeValue&&a.startOffset===a.startContainer.nodeValue.length){var c=f.util.findAdjacentTextNodeWithContent(f.selection.getSelectionElement(this.window),a.startContainer,this.document);if(c){for(var k=0;0===c.nodeValue.substr(k,1).trim().length;)k+=1;f.selection.select(this.document,c,k,a.endContainer,a.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||f.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var a=f.selection.getSelectionElement(this.window);if(!a||-1===this.getEditorElements().indexOf(a)||a.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!f.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){if(!this.showAndUpdateToolbarTimeout){var a=this;this.showAndUpdateToolbarTimeout=setTimeout(function(){a.modifySelection();a.setToolbarButtonStates();a.trigger("positionToolbar",{},a.base.getFocusedElement());a.showToolbarDefaultActions();a.setToolbarPosition();delete a.showAndUpdateToolbarTimeout},50)}},setToolbarButtonStates:function(){this.forEachExtension(function(a){"function"===typeof a.isActive&&"function"===typeof a.setInactive&&a.setInactive()});this.checkActiveButtons()},checkActiveButtons:function(){var a=[],c=null,k=f.selection.getSelectionRange(this.document),l=function(b){"function"===typeof b.checkState?b.checkState(d):"function"===typeof b.isActive&&"function"===typeof b.isAlreadyApplied&&"function"===typeof b.setActive&&!b.isActive()&&b.isAlreadyApplied(d)&&b.setActive()};if(k){this.forEachExtension(function(b){if("function"===typeof b.queryCommandState&&(c=b.queryCommandState(),null!==c)){c&&"function"===typeof b.setActive&&b.setActive();return}a.push(b)});var d=f.selection.getSelectedParentElement(k);if(this.getEditorElements().some(function(b){return f.util.isDescendant(b,d,!0)}))for(;d;){a.forEach(l);if(f.util.isMediumEditorElement(d))break;d=d.parentNode}}},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var a=this.base.getFocusedElement(),c=this.window.getSelection();if(!a)return this;if(this.static||!c.isCollapsed)this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(a):this.positionToolbar(c)),this.trigger("positionedToolbar",{},this.base.getFocusedElement())},positionStaticToolbar:function(a){this.getToolbarElement().style.left="0";var c=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,k=this.window.innerWidth,l=this.getToolbarElement(),d=a.getBoundingClientRect(),b=d.top+c,e=d.left+d.width/2,g=l.offsetHeight,p=l.offsetWidth,q=p/2;this.sticky?c>b+a.offsetHeight-g-this.stickyTopOffset?(l.style.top=b+a.offsetHeight-g+"px",l.classList.remove("medium-editor-sticky-toolbar")):c>b-g-this.stickyTopOffset?(l.classList.add("medium-editor-sticky-toolbar"),l.style.top=this.stickyTopOffset+
"px"):(l.classList.remove("medium-editor-sticky-toolbar"),l.style.top=b-g+"px"):l.style.top=b-g+"px";switch(this.align){case "left":var r=d.left;break;case "right":r=d.right-p;break;case "center":r=e-q}0>r?r=0:r+p>k&&(r=k-Math.ceil(p)-1);l.style.left=r+"px"},positionToolbar:function(a){this.getToolbarElement().style.left="0";this.getToolbarElement().style.right="initial";a=a.getRangeAt(0);var c=a.getBoundingClientRect();if(!c||0===c.height&&0===c.width&&a.startContainer===a.endContainer)c=1===a.startContainer.nodeType&&a.startContainer.querySelector("img")?a.startContainer.querySelector("img").getBoundingClientRect():a.startContainer.getBoundingClientRect();a=this.window.innerWidth;var k=this.getToolbarElement(),l=k.offsetHeight,d=k.offsetWidth/2,b=this.diffLeft-d,e=this.getEditorOption("elementsContainer"),g={},p={};if(-1<["absolute","fixed"].indexOf(window.getComputedStyle(e).getPropertyValue("position"))){var q=e.getBoundingClientRect();["top","left"].forEach(function(r){p[r]=c[r]-q[r]});p.width=c.width;p.height=c.height;c=p;a=q.width;g.top=e.scrollTop}else g.top=this.window.pageYOffset;e=c.left+c.width/2;g.top+=c.top-l;50>c.top?(k.classList.add("medium-toolbar-arrow-over"),k.classList.remove("medium-toolbar-arrow-under"),g.top+=50+c.height-this.diffTop):(k.classList.add("medium-toolbar-arrow-under"),k.classList.remove("medium-toolbar-arrow-over"),g.top+=this.diffTop);e<d?(g.left=b+d,g.right="initial"):a-e<d?(g.left="auto",g.right=0):(g.left=b+e,g.right="initial");["top","left","right"].forEach(function(r){k.style[r]=g[r]+(isNaN(g[r])?"":"px")})}});f.extensions.toolbar=u})();(function(){var u=f.Extension.extend({init:function(){f.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(a){a.preventDefault();a.dataTransfer.dropEffect="copy";"dragover"===a.type?a.target.classList.add("medium-editor-dragover"):"dragleave"===a.type&&a.target.classList.remove("medium-editor-dragover")},handleDrop:function(a){a.preventDefault();a.stopPropagation();if(a.dataTransfer.files){var c=Array.prototype.slice.call(a.dataTransfer.files,0);c.some(function(k){if(k.type.match("image")){var l=new FileReader;l.readAsDataURL(k);var d="medium-img-"+ +new Date;f.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+d+'" />');l.onload=function(){var b=this.document.getElementById(d);b&&(b.removeAttribute("id"),b.removeAttribute("class"),b.src=l.result)}.bind(this)}}.bind(this))}a.target.classList.remove("medium-editor-dragover")}});f.extensions.imageDragging=u})();(function(){function u(h){var m=f.selection.getSelectionStart(this.options.ownerDocument),n=m.textContent;m=f.selection.getCaretOffsets(m);(void 0===n[m.left-1]||""===n[m.left-1].trim()||void 0!==n[m.left]&&""===n[m.left].trim())&&h.preventDefault()}function a(h,m){this.options.disableReturn||m.getAttribute("data-disable-return")?h.preventDefault():(this.options.disableDoubleReturn||m.getAttribute("data-disable-double-return"))&&((m=f.selection.getSelectionStart(this.options.ownerDocument))&&""===m.textContent.trim()&&"li"!==m.nodeName.toLowerCase()||m.previousElementSibling&&"br"!==m.previousElementSibling.nodeName.toLowerCase()&&""===m.previousElementSibling.textContent.trim())&&h.preventDefault()}function c(h){var m=f.selection.getSelectionStart(this.options.ownerDocument);"pre"===(m&&m.nodeName.toLowerCase())&&(h.preventDefault(),f.util.insertHTMLCommand(this.options.ownerDocument,"    "));f.util.isListItem(m)&&(h.preventDefault(),h.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function k(h){var m=f.selection.getSelectionStart(this.options.ownerDocument);var n=m.nodeName.toLowerCase();var t=/^(\s+|<br\/?>)?$/i,w=/h\d/i;f.util.isKey(h,[f.util.keyCode.BACKSPACE,f.util.keyCode.ENTER])&&m.previousElementSibling&&w.test(n)&&0===f.selection.getCaretOffsets(m).left?f.util.isKey(h,f.util.keyCode.BACKSPACE)&&t.test(m.previousElementSibling.innerHTML)?(m.previousElementSibling.parentNode.removeChild(m.previousElementSibling),h.preventDefault()):!this.options.disableDoubleReturn&&f.util.isKey(h,f.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",m.previousElementSibling.parentNode.insertBefore(n,m),h.preventDefault()):f.util.isKey(h,f.util.keyCode.DELETE)&&m.nextElementSibling&&m.previousElementSibling&&!w.test(n)&&t.test(m.innerHTML)&&w.test(m.nextElementSibling.nodeName.toLowerCase())?(f.selection.moveCursor(this.options.ownerDocument,m.nextElementSibling),m.previousElementSibling.parentNode.removeChild(m),h.preventDefault()):f.util.isKey(h,f.util.keyCode.BACKSPACE)&&"li"===n&&t.test(m.innerHTML)&&!m.previousElementSibling&&!m.parentElement.previousElementSibling&&m.nextElementSibling&&"li"===m.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",m.parentElement.parentElement.insertBefore(n,m.parentElement),f.selection.moveCursor(this.options.ownerDocument,n),m.parentElement.removeChild(m),h.preventDefault()):f.util.isKey(h,f.util.keyCode.BACKSPACE)&&!1!==f.util.getClosestTag(m,"blockquote")&&0===f.selection.getCaretOffsets(m).left?(h.preventDefault(),f.util.execFormatBlock(this.options.ownerDocument,"p")):f.util.isKey(h,f.util.keyCode.ENTER)&&!1!==f.util.getClosestTag(m,"blockquote")&&0===f.selection.getCaretOffsets(m).right?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",m.parentElement.insertBefore(n,m.nextSibling),f.selection.moveCursor(this.options.ownerDocument,n),h.preventDefault()):f.util.isKey(h,f.util.keyCode.BACKSPACE)&&f.util.isMediumEditorElement(m.parentElement)&&!m.previousElementSibling&&m.nextElementSibling&&t.test(m.innerHTML)&&(h.preventDefault(),"medium-insert-buttons"!==m.nextElementSibling.className&&(f.selection.moveCursor(this.options.ownerDocument,m.nextSibling),m.parentElement.removeChild(m)))}function l(h){var m=f.selection.getSelectionStart(this.options.ownerDocument);if(m&&(f.util.isMediumEditorElement(m)&&0===m.children.length&&!f.util.isBlockContainer(m)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),f.util.isKey(h,f.util.keyCode.ENTER)&&!f.util.isListItem(m)&&!f.util.isBlockContainer(m))){var n=m.nodeName.toLowerCase();"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):h.shiftKey||h.ctrlKey||("div"===n?(h=this.options.ownerDocument.createElement("p"),h.innerHTML="<br>","<br>"===m.innerHTML?m.replaceWith(h):m.parentElement.insertBefore(h,m.nextSibling),f.selection.moveCursor(this.options.ownerDocument,h)):this.options.ownerDocument.execCommand("formatBlock",!1,"p"))}}function d(h,m){if(h=m.parentNode.querySelector('textarea[medium-editor-textarea-id="'+m.getAttribute("medium-editor-textarea-id")+'"]'))h.value=m.innerHTML.trim()}function b(h){h._mediumEditors&&h._mediumEditors[this.id]&&(h._mediumEditors[this.id]=null)}function e(h,m,n){var t=[];h||(h=[]);"string"===typeof h&&(h=m.querySelectorAll(h));f.util.isElement(h)&&(h=[h]);if(n)for(m=0;m<h.length;m++)n=h[m],!f.util.isElement(n)||n.getAttribute("data-medium-editor-element")||n.getAttribute("medium-editor-textarea-id")||t.push(n);else t=Array.prototype.slice.apply(h);return t}function g(h){var m=h.parentNode.querySelector('textarea[medium-editor-textarea-id="'+h.getAttribute("medium-editor-textarea-id")+'"]');m&&(m.classList.remove("medium-editor-hidden"),m.removeAttribute("medium-editor-textarea-id"));h.parentNode&&h.parentNode.removeChild(h)}function p(h,m){Object.keys(m).forEach(function(n){void 0===h[n]&&(h[n]=m[n])});return h}function q(h,m,n){h=p(h,{window:n.options.contentWindow,document:n.options.ownerDocument,base:n});"function"===typeof h.init&&h.init();h.name||(h.name=m);return h}function r(){return this.elements.every(function(h){return!!h.getAttribute("data-disable-toolbar")})?!1:!1!==this.options.toolbar}function v(h){for(var m=this.options.ownerDocument.createElement("div"),n=Date.now(),t="medium-editor-"+n,w=h.attributes;this.options.ownerDocument.getElementById(t);)n++,t="medium-editor-"+n;m.className=h.className;m.id=t;m.innerHTML=h.value;h.setAttribute("medium-editor-textarea-id",t);n=0;for(var z=w.length;n<z;n++)m.hasAttribute(w[n].nodeName)||m.setAttribute(w[n].nodeName,w[n].value);if(h.form)this.on(h.form,"reset",function(C){C.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(t))}.bind(this));h.classList.add("medium-editor-hidden");h.parentNode.insertBefore(m,h);return m}function x(){this.extensions=[];Object.keys(this.options.extensions).forEach(function(n){"toolbar"!==n&&this.options.extensions[n]&&this.extensions.push(q(this.options.extensions[n],n,this))},this);if(!this.options.extensions.imageDragging){var h=this.options.fileDragging;h||(h={},!1===this.options.imageDragging&&(h.allowedTypes=[]));this.addBuiltInExtension("fileDragging",h)}h=r.call(this)?!1!==this.options.anchorPreview:!1;var m={paste:!0,"anchor-preview":h,autoLink:!1!==this.options.autoLink,keyboardCommands:!1!==this.options.keyboardCommands,placeholder:!1!==this.options.placeholder};Object.keys(m).forEach(function(n){m[n]&&this.addBuiltInExtension(n)},this);h=this.options.extensions.toolbar;!h&&r.call(this)&&(h=f.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection}),h=new f.extensions.toolbar(h));h&&this.extensions.push(q(h,"toolbar",this))}function A(h,m){var n=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];m&&n.forEach(function(t){m.hasOwnProperty(t[0])&&void 0!==m[t[0]]&&f.util.deprecated(t[0],t[1],"v6.0.0")});return f.util.defaults({},m,h)}function y(h,m){var n;if(n=/^append-(.+)$/gi.exec(h))return f.util.execFormatBlock(this.options.ownerDocument,n[1]);if("fontSize"===h)return m.size&&f.util.deprecated(".size option for fontSize command",".value","6.0.0"),m=m.value||m.size,this.options.ownerDocument.execCommand("fontSize",!1,m);if("fontName"===h)return m.name&&f.util.deprecated(".name option for fontName command",".value","6.0.0"),m=m.value||m.name,this.options.ownerDocument.execCommand("fontName",!1,m);if("createLink"===h)return this.createLink(m);if("image"===h)return h=this.options.contentWindow.getSelection().toString().trim(),this.options.ownerDocument.execCommand("insertImage",!1,h);if("html"===h)return h=this.options.contentWindow.getSelection().toString().trim(),f.util.insertHTMLCommand(this.options.ownerDocument,h);if(/justify([A-Za-z]*)$/g.exec(h))return h=this.options.ownerDocument.execCommand(h,!1,null),(m=f.selection.getSelectedParentElement(f.selection.getSelectionRange(this.options.ownerDocument)))&&B.call(this,f.util.getTopBlockContainer(m)),h;m=m&&m.value;return this.options.ownerDocument.execCommand(h,!1,m)}function B(h){if(h){var m,n=Array.prototype.slice.call(h.childNodes).filter(function(t){var w="div"===t.nodeName.toLowerCase();w&&!m&&(m=t.style.textAlign);return w});n.length&&(this.saveSelection(),n.forEach(function(t){if(t.style.textAlign===m){var w=t.lastChild;w&&(f.util.unwrap(t,this.options.ownerDocument),t=this.options.ownerDocument.createElement("BR"),w.parentNode.insertBefore(t,w.nextSibling))}},this),h.style.textAlign=m,this.restoreSelection())}}var F={};f.prototype={init:function(h,m){this.options=A.call(this,this.defaults,m);this.origElements=h;this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body);return this.setup()},setup:function(){if(!this.isActive){var h=this.options.contentWindow;h._mediumEditors||(h._mediumEditors=[null]);this.id||(this.id=h._mediumEditors.length);h._mediumEditors[this.id]=this;this.events=new f.Events(this);this.elements=[];this.addElements(this.origElements);0!==this.elements.length&&(this.isActive=!0,x.call(this),this.subscribe("editableKeydownTab",c.bind(this)),this.subscribe("editableKeydownDelete",k.bind(this)),this.subscribe("editableKeydownEnter",k.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",u.bind(this)),this.instanceHandleEditableKeydownEnter||!this.options.disableReturn&&!this.options.disableDoubleReturn||(this.instanceHandleEditableKeydownEnter=a.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)))}},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(h){"function"===typeof h.destroy&&h.destroy()},this),this.events.destroy(),this.elements.forEach(function(h){this.options.spellcheck&&(h.innerHTML=h.innerHTML);h.removeAttribute("contentEditable");h.removeAttribute("spellcheck");h.removeAttribute("data-medium-editor-element");h.classList.remove("medium-editor-element");h.removeAttribute("role");h.removeAttribute("aria-multiline");h.removeAttribute("medium-editor-index");h.removeAttribute("data-medium-editor-editor-index");h.getAttribute("medium-editor-textarea-id")&&g(h)},this),this.elements=[],this.instanceHandleEditableInput=this.instanceHandleEditableKeydownEnter=null,b.call(this,this.options.contentWindow))},on:function(h,m,n,t){this.events.attachDOMEvent(h,m,n,t);return this},off:function(h,m,n,t){this.events.detachDOMEvent(h,m,n,t);return this},subscribe:function(h,m){this.events.attachCustomEvent(h,m);return this},unsubscribe:function(h,m){this.events.detachCustomEvent(h,m);return this},trigger:function(h,m,n){this.events.triggerCustomEvent(h,m,n);return this},delay:function(h){var m=this;return setTimeout(function(){m.isActive&&h()},this.options.delay)},serialize:function(){var h,m={},n=this.elements.length;for(h=0;h<n;h+=1){var t=""!==this.elements[h].id?this.elements[h].id:"element-"+h;m[t]={value:this.elements[h].innerHTML.trim()}}return m},getExtensionByName:function(h){var m;this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===h?(m=n,!0):!1});return m},addBuiltInExtension:function(h,m){var n=this.getExtensionByName(h);if(n)return n;switch(h){case "anchor":m=f.util.extend({},this.options.anchor,m);n=new f.extensions.anchor(m);break;case "anchor-preview":n=new f.extensions.anchorPreview(this.options.anchorPreview);break;case "autoLink":n=new f.extensions.autoLink;break;case "fileDragging":n=new f.extensions.fileDragging(m);break;case "fontname":n=new f.extensions.fontName(this.options.fontName);break;case "fontsize":n=new f.extensions.fontSize(m);break;case "keyboardCommands":n=new f.extensions.keyboardCommands(this.options.keyboardCommands);break;case "paste":n=new f.extensions.paste(this.options.paste);break;case "placeholder":n=new f.extensions.placeholder(this.options.placeholder);break;default:f.extensions.button.isBuiltInButton(h)&&(m?(m=f.util.defaults({},m,f.extensions.button.prototype.defaults[h]),n=new f.extensions.button(m)):n=new f.extensions.button(h))}n&&this.extensions.push(q(n,h,this));return n},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var h=this.getExtensionByName("toolbar");h&&h.checkState();return this},queryCommandState:function(h){var m,n=null;(m=/^full-(.+)$/gi.exec(h))&&(h=m[1]);try{n=this.options.ownerDocument.queryCommandState(h)}catch(t){n=null}return n},execAction:function(h,m){var n;(n=/^full-(.+)$/gi.exec(h))?(this.saveSelection(),this.selectAllContents(),m=y.call(this,n[1],m),this.restoreSelection()):m=y.call(this,h,m);"insertunorderedlist"!==h&&"insertorderedlist"!==h||f.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement());this.checkSelection();return m},getSelectedParentElement:function(h){void 0===h&&(h=this.options.contentWindow.getSelection().getRangeAt(0));return f.selection.getSelectedParentElement(h)},selectAllContents:function(){var h=f.selection.getSelectionElement(this.options.contentWindow);if(h){for(;1===h.children.length;)h=h.children[0];this.selectElement(h)}},selectElement:function(h){f.selection.selectNode(h,this.options.ownerDocument);(h=f.selection.getSelectionElement(this.options.contentWindow))&&this.events.focusElement(h)},getFocusedElement:function(){var h;this.elements.some(function(m){!h&&m.getAttribute("data-medium-focused")&&(h=m);return!!h},this);return h},exportSelection:function(h){var m=f.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(m),t=null;0<=n&&(t=f.selection.exportSelection(m,this.options.ownerDocument,h));null!==t&&0!==n&&(t.editableElementIndex=n);return t},saveSelection:function(h){this.selectionState=this.exportSelection(h)},importSelection:function(h,m){h&&f.selection.importSelection(h,this.elements[h.editableElementIndex||0],this.options.ownerDocument,m)},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(h){var m=f.selection.getSelectionElement(this.options.contentWindow),n={},t;if(-1!==this.elements.indexOf(m)){try{this.events.disableCustomEvent("editableInput");h.url&&f.util.deprecated(".url option for createLink",".value","6.0.0");if((t=h.url||h.value)&&0<t.trim().length){var w=this.options.contentWindow.getSelection();if(w){var z=w.getRangeAt(0),C=z.commonAncestorContainer;3===z.endContainer.nodeType&&3!==z.startContainer.nodeType&&0===z.startOffset&&z.startContainer.firstChild===z.endContainer&&(C=z.endContainer);var H=f.util.getClosestBlockContainer(z.startContainer);var K=f.util.getClosestBlockContainer(z.endContainer);if(3!==C.nodeType&&0!==C.textContent.length&&H===K){w=H||m;var D=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink");var E=this.exportSelection();D.appendChild(w.cloneNode(!0));m===w?f.selection.select(this.options.ownerDocument,w.firstChild,0,w.lastChild,3===w.lastChild.nodeType?w.lastChild.nodeValue.length:w.lastChild.childNodes.length):f.selection.select(this.options.ownerDocument,w,0,w,w.childNodes.length);var I=this.exportSelection();var G=f.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,D,{start:E.start-I.start,end:E.end-I.start,editableElementIndex:E.editableElementIndex});0===G.length&&(D=this.options.ownerDocument.createDocumentFragment(),D.appendChild(C.cloneNode(!0)),G=[D.firstChild.firstChild,D.firstChild.lastChild]);f.util.createLink(this.options.ownerDocument,G,t.trim());var J=(D.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;f.util.insertHTMLCommand(this.options.ownerDocument,D.firstChild.innerHTML.replace(/^\s+/,""));E.start-=J;E.end-=J;this.importSelection(E)}else this.options.ownerDocument.execCommand("createLink",!1,t);this.options.targetBlank||"_blank"===h.target?f.util.setTargetBlank(f.selection.getSelectionStart(this.options.ownerDocument),t):f.util.removeTargetBlank(f.selection.getSelectionStart(this.options.ownerDocument),t);h.buttonClass&&f.util.addClassToAnchors(f.selection.getSelectionStart(this.options.ownerDocument),h.buttonClass)}}if(this.options.targetBlank||"_blank"===h.target||h.buttonClass){n=this.options.ownerDocument.createEvent("HTMLEvents");n.initEvent("input",!0,!0,this.options.contentWindow);h=0;for(var L=this.elements.length;h<L;h+=1)this.elements[h].dispatchEvent(n)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",n,m)}},cleanPaste:function(h){this.getExtensionByName("paste").cleanPaste(h)},pasteHTML:function(h,m){this.getExtensionByName("paste").pasteHTML(h,m)},setContent:function(h,m){m=m||0;this.elements[m]&&(m=this.elements[m],m.innerHTML=h,this.checkContentChanged(m))},getContent:function(h){h=h||0;return this.elements[h]?this.elements[h].innerHTML.trim():null},checkContentChanged:function(h){h=h||f.selection.getSelectionElement(this.options.contentWindow);this.events.updateInput(h,{target:h,currentTarget:h})},resetContent:function(h){if(h){var m=this.elements.indexOf(h);-1!==m&&this.setContent(F[h.getAttribute("medium-editor-index")],m)}else this.elements.forEach(function(n,t){this.setContent(F[n.getAttribute("medium-editor-index")],t)},this)},addElements:function(h){h=e(h,this.options.ownerDocument,!0);if(0===h.length)return!1;h.forEach(function(m){var n=this.id;if(!m.getAttribute("data-medium-editor-element")){"textarea"===m.nodeName.toLowerCase()&&(m=v.call(this,m),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=d.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput)));this.options.disableEditing||m.getAttribute("data-disable-editing")||(m.setAttribute("contentEditable",!0),m.setAttribute("spellcheck",this.options.spellcheck));this.instanceHandleEditableKeydownEnter||!m.getAttribute("data-disable-return")&&!m.getAttribute("data-disable-double-return")||(this.instanceHandleEditableKeydownEnter=a.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter));if(!this.options.disableReturn&&!m.getAttribute("data-disable-return"))this.on(m,"keyup",l.bind(this));var t=f.util.guid();m.setAttribute("data-medium-editor-element",!0);m.classList.add("medium-editor-element");m.setAttribute("role","textbox");m.setAttribute("aria-multiline",!0);m.setAttribute("data-medium-editor-editor-index",n);m.setAttribute("medium-editor-index",t);F[t]=m.innerHTML;this.events.attachAllEventsToElement(m)}this.elements.push(m);this.trigger("addElement",{target:m,currentTarget:m},m)},this)},removeElements:function(h){var m=e(h,this.options.ownerDocument).map(function(n){return n.getAttribute("medium-editor-textarea-id")&&n.parentNode?n.parentNode.querySelector('div[medium-editor-textarea-id="'+n.getAttribute("medium-editor-textarea-id")+'"]'):n});this.elements=this.elements.filter(function(n){return-1!==m.indexOf(n)?(this.events.cleanupElement(n),n.getAttribute("medium-editor-textarea-id")&&g(n),this.trigger("removeElement",{target:n,currentTarget:n},n),!1):!0},this)}};f.getEditorFromElement=function(h){var m=h.getAttribute("data-medium-editor-editor-index");return(h=h&&h.ownerDocument&&(h.ownerDocument.defaultView||h.ownerDocument.parentWindow))&&h._mediumEditors&&h._mediumEditors[m]?h._mediumEditors[m]:null}})();f.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0};f.parseVersionString=function(u){u=u.split("-");var a=u[0].split("."),c=1<u.length?u[1]:"";return{major:parseInt(a[0],10),minor:parseInt(a[1],10),revision:parseInt(a[2],10),preRelease:c,toString:function(){return[a[0],a[1],a[2]].join(".")+(c?"-"+c:"")}}};f.version=f.parseVersionString.call(this,"5.23.3");return f}());